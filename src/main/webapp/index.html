<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="icon" href="http://neo4j.org/favicon.ico"/>
    <link rel="stylesheet" href="console_assets/stylesheets/codemirror.css">
    <link rel="stylesheet" href="console_assets/stylesheets/cypher.css">
    <link rel="stylesheet" href="console_assets/stylesheets/datatable.css">
    <title>Neo4j Console</title>
    <script type="text/javascript" src="console_assets/javascripts/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="console_assets/javascripts/d3.min.js"></script>
    <script type="text/javascript" src="console_assets/javascripts/visualization.js"></script>
    <script type="text/javascript" src="console_assets/javascripts/codemirror.min.js"></script>
    <script type="text/javascript" src="console_assets/javascripts/cypher.js"></script>
    <script type="text/javascript" src="console_assets/javascripts/formatting.js"></script>
    <script type="text/javascript" src="console_assets/javascripts/runmode.js"></script>
    <script type="text/javascript" src="console_assets/javascripts/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="console_assets/javascripts/cypher.datatable.js"></script>
    <script type="text/javascript" src="console_assets/javascripts/console.js"></script>
    <style type="text/css">
        @import url("console_assets/stylesheets/main.css");
        @import url("console_assets/stylesheets/highlight.css");
        @import url("console_assets/stylesheets/d3.css");
        @import url("console_assets/stylesheets/light.css_");
    </style>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-1192232-25']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>
<body>
<span id="welcome_msg" style="display:none;">
      <span class="welcome">	
        You can modify and query this graph by entering statements in the input field at the bottom.
        For some syntax help hit the <button type="button" onclick="$('#info').toggle();" class="btn_pretty">Help</button> button.
        If you want to share your graph, just do it with <button onclick="toggleShare();" class="btn_pretty">Share</button>
      </span>
    </span>

<div id="main">
    <div style="position: absolute;top: 5px;right: 5px;">

        <button type="button" onclick="$('#info').toggle();" class="btn_pretty">Help</button>
        <button onclick="toggleShare();" class="btn_pretty">Share</button>
        <button onclick="toggleGraph();" class="btn_pretty">Toggle Viz</button>
        <select id="version" class="selectpicker">
            <option selected="selected" value="">Latest Cypher syntax</option>
            <option value="1.9">Cypher parser v1.9</option>
            <option value="1.8">Cypher parser v1.8</option>
            <option value="1.7">Cypher parser v1.7</option>
        </select>
        </span>
    </div>

    <div id="output" class="console cm-s-cypher">
    </div>
    <form id="form" action="#">
        <textarea id="input">start n=node(*) return n;</textarea>
        <button id="query_button" class="btn_pretty" onclick="query();return false;">Run</button>
    </form>
    <!--div id="graph">
    </div-->
    <div id="info" class="popup">
        <button type="button" onclick="$('#info').toggle();" class="btn_pretty btn_close">Close</button>
        <h3>Welcome to the Neo4j Console</h3>

        <p>This is an interactive console (REPL) for graphs with integrated visualization.
            It is hosted on Heroku at <a href="http://console.neo4j.org">http://console.neo4j.org</a> the source
            code is available on <a target="neo4j-console" href="http://github.com/neo4j-contrib/rabbithole">GitHub</a>.
        </p>
        <h4>Updating</h4>

        <p>To interactively build the Graph you can
            use <a target="neo4j-console" href="http://docs.neo4j.org/chunked/snapshot/query-create.html">Cypher</a> to
            create nodes <code>create neo={ name : "Neo" }</code> and to create relationships
            <code>create neo-[:KNOWS {since:"2 days"}]->morpheus</code>.<br/>
            Alternatively <a target="neo4j-console" href="http://geoff.nigelsmall.net/hello-subgraph">Geoff</a>
            statements like
            <code>(Neo) {"name":"Neo"}</code> create nodes and <code>(Neo)-[:LOVES]->(Trinity)</code> creates
            relationships. Connect to or update existing nodes by referring to (nodeId).</p>
        <h4>Querying</h4>

        <p>
            For querying and updating the graph, <a target="neo4j-console" href="http://neo4j.org/resources/cypher">Cypher</a>
            is your friend. E.g.
        <ul>
            <li><code>start user=node(1) match user-[:KNOWS]->friend where friend.age > 20 return user,friend order by
                friend.age limit 10</code></li>
            <li><code>start n=node(*) where has(n.name) create m { name : "actor of " n.name }, m-[r:ACTS_AS]->n return
                m,r</code></li>
        </ul>
        </p>
        <p>You can <a href="#" onclick="reset();return false;">reset</a> or <a href="#"
                                                                               onclick="toggleShare();return false;">share</a>
            the database.</p>
    </div>
    <div id="shareUrl" class="popup">
        <button type="button" onclick="$('#shareUrl').toggle();" class="btn_pretty btn_close">Close</button>
        <h3>Initial graph setup (<a href="#" onclick="export_graph('cypher');return false;">Cypher</a> or <a href="#"
                                                                                                             onclick="export_graph('geoff');return false;">Geoff</a>):
        </h3><textarea id="share_init" rows="5" cols="80" style="width:80%"></textarea>

        <h3>Initial Query (Cypher):</h3><input type="text" id="share_query" style="width:80%"/><br/>

        <h3 style="display: inline-block;">Remove Root Node: </h3><input type="checkbox" id="share_no_root"
                                                                         style="vertical-align: bottom;"/><br/>

        <h3 style="display: inline-block;">Version: </h3>
        <select id="share_version">
            <option selected="selected" value="">current</option>
            <option value="1.9">1.9</option>
            <option value="1.8">1.8</option>
            <option value="1.7">1.7</option>
        </select>
        <br/>
        Adjust the above parameters to fit your intention, then
        <button class="btn_pretty" onclick="store_graph_info();return false;">click to generate</button>
        the final URLs to share.
        <br/>
        Share
        <input type="url" id="share_short" style="width:20%" onclick="this.select();"/> as a <a target="neo4j-console"
                                                                                                href="" id="share_url">link</a>
        (email, web etc).
        <!-- AddThis Button BEGIN -->
        <div class="addthis_toolbox addthis_default_style" style="display: inline-block;vertical-align: bottom;">
            <a class="addthis_button_preferred_1"></a>
            <a class="addthis_button_preferred_2"></a>
            <a class="addthis_button_preferred_3"></a>
            <a class="addthis_button_preferred_4"></a>
            <a class="addthis_button_compact"></a>
            <a class="addthis_counter addthis_bubble_style"></a>
        </div>
        <script type="text/javascript"
                src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=xa-4f895f9309279e1e"></script>
        <!-- AddThis Button END -->
        <a id="share_yuml" href="#" target="neo4j-console"><img src="console_assets/img/yUML.png" height="16"/></a>
        <br/>
        Paste HTML to embed in website (Adjust width and height):<br/>
        <input type="url" id="share_iFrame" style="width:80%" onclick="this.select();"/>
    </div>
</body>
</html>
