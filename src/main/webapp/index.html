<html>
<head>
    <link rel="icon" href="http://neo4j.org/favicon.ico" />
    <title>Neo4j Console</title>
    <script type="text/javascript" src="javascripts/jquery-1.6.4.min.js"></script>
	<script type="text/javascript" src="javascripts/d3.min.js"></script>
	<script type="text/javascript" src="javascripts/visualization.js"></script>
    <script type="text/javascript" src="javascripts/console.js"></script>
   <style type="text/css">
     @import url("stylesheets/main.css");
     @import url("stylesheets/highlight.css");
     @import url("stylesheets/d3.css");
   </style>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1192232-25']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>
<body>
<div id="main">
    <img title="Info" onclick="$('#info').toggle();" class="info button" src="img/info.png"/>
    <img title="Share this graph" onclick="toggleShare();" class="shareUrl button" src="img/Link-icon.png"/>
	<img title="Toggle Vizualization" onclick="toggleGraph();" class="graph button" src="img/graph.png"/>
    <pre id="output" class="console">
    </pre>
	<form id="form" action="#">
	    <textarea id="input" class="console">start n=node(*) return n</textarea>
	</form>
	<div id="graph">
	</div>
	<div id="info" class="popup">
		This is an interactive console (REPL) for graphs with integrated visualization.
		It is hosted on Heroku at <a href="http://console.neo4j.org">http://console.neo4j.org</a> the source
		code is available on <a href="http://github.com/neo4j-contrib/rabbithole">GitHub</a>.<br/><br/>
		To add to the Graph you can issue
		<a target="_blank" href="http://geoff.nigelsmall.net/hello-subgraph">Geoff</a> statements, like
		(Neo) {"name":"Neo"} to create nodes and (Neo)-[:LOVES]->(Trinity) to create relationships. Connect or update existing nodes by referring to (nodeId)<br/><br/>
		For querying and mutating the graph, <a href="http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html" target="_blank">Cypher</a> is your friend. E.g. 
		<ul>
			<li><code>start user=node(1) match user-[:KNOWS]->friend where friend.age > 20 return user,friend order by friend.age limit 10</code></li>
			<li><code>start n=node(*) where has(n.name) create m { name : "actor of " n.name }, m-[r:ACTS_AS]->n return m,r</code></li>
		</ul>
		 <br/><br/>
		You can <a href="#" onclick="reset()">reset</a> or share the database.<br/>
        
	</div>
    <div id="shareUrl" class="popup">
        <h3>Initial graph setup (<a href="#" onclick="export_graph('cypher');">Cypher</a> or <a href="#" onclick="export_graph('geoff');">Geoff</a>):</h3><textarea id="share_init" rows="5" cols="80" style="width:80%"></textarea>
        <h3>Initial Query (Cypher):</h3><input type="text" id="share_query" style="width:80%"/><br/>
        <h3 style="display: inline-block;">Remove Root Node: </h3><input type="checkbox" id="share_no_root" style="vertical-align: bottom;"/><br/>
        Adjust the above parameters to fit your intention, then <button class="btn_pretty" href="#" onclick="generate_url();">click to generate</button> the final URLs to share.<br/>

        Share as a link (email, web etc)
        <input type="url" id="share_url" style="width:80%" onclick="this.select();"/><br/>
        <!-- AddThis Button BEGIN -->
        <input type="url" id="share_short" style="width:20%" onclick="this.select();"/>
        <div class="addthis_toolbox addthis_default_style" style="display: inline-block;vertical-align: bottom;">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>
        </div>
        <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=xa-4f895f9309279e1e"></script>
        <!-- AddThis Button END -->
        <br/>
        Paste HTML to embed in website (Adjust width and height):<br/>
        <input type="url" id="share_iFrame" style="width:80%" onclick="this.select();"/></div>
        <!--br/>Preview:<br/>
        <div id="preview"></div-->
        
    </div>
</div>
</body>
</html>
